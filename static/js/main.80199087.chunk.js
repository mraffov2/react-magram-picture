(window["webpackJsonpreact-app"]=window["webpackJsonpreact-app"]||[]).push([[0],{36:function(e,t,a){e.exports=a.p+"static/media/phone.b7bb8b52.png"},39:function(e,t,a){e.exports=a.p+"static/media/no-image-icon.f98b32ce.png"},40:function(e,t,a){e.exports=a(70)},70:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(35),l=a.n(r),o=a(6),c=a(14),i=a(18),m=a(3),d=a.n(m),u=a(13),p=a(8),g=a(9),f=a(11),h=a(10),E=a(12),v=a(36),b=a.n(v),N=a(15),w=a.n(N),S=a(19),k=a.n(S),x=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).Logout=function(){return localStorage.removeItem("token"),s.a.createElement(c.a,{to:"/login"})};var n=!0;return null===localStorage.getItem("token")&&(n=!1),a.state={loggedIn:n},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},s.a.createElement("div",{className:"container"},s.a.createElement(o.b,{className:"navbar-brand",to:"/"},"MaGram"),s.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},s.a.createElement("span",{className:"navbar-toggler-icon"})),s.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},s.a.createElement("ul",{className:"navbar-nav ml-auto"},s.a.createElement("li",{className:"nav-item "},this.state.loggedIn?s.a.createElement(o.b,{onClick:this.Logout,to:"/login",className:"nav-link"},"logout"):s.a.createElement(o.b,{className:"nav-link",to:"/login"},"Login")))))))}}]),t}(n.Component),y=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),a.setState({loading:!0});var t={name:a.state.name,last_name:a.state.last_name,email:a.state.email,password:a.state.password};""===a.state.name||""===a.state.last_name||""===a.state.email||""===a.state.password||""===a.state.confirm_password?(a.setState({fieldRequired:!0}),a.setState({loading:!1})):a.state.password!==a.state.confirm_password?(a.setState({samePassword:!0}),a.setState({loading:!1})):w.a.post("https://appexpressjwt.herokuapp.com/api/register",k.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){var e=Object(u.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({registerSuccesfully:!0});case 2:return e.next=4,a.setState({name:"",last_name:"",email:"",password:"",confirm_password:""});case 4:return e.next=6,localStorage.setItem("token",t.data.token);case 6:return e.next=8,a.setState({LoggedIn:!0});case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){404===e.request.status?(a.setState({emailRegistered:!0}),a.setState({loading:!1})):(a.setState({wrongRegister:!0}),a.setState({loading:!1}))})},a.onChange=function(e){a.setState(Object(i.a)({},e.target.name,e.target.value))},a.state={name:"",last_name:"",email:"",password:"",confirm_password:"",fieldRequired:!1,samePassword:!1,wrongRegister:!1,emailRegistered:!1,LoggedIn:!1,loading:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return this.state.LoggedIn?s.a.createElement(c.a,{to:"/posts"}):s.a.createElement(s.a.Fragment,null,s.a.createElement(x,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:" d-none d-sm-none d-md-none  d-lg-block col-lg-6"},s.a.createElement("img",{src:b.a,className:"img-fluid mt-2",alt:""})),s.a.createElement("div",{className:"col-12 col-sm-12 col-md-8 col-lg-6"},this.state.wrongRegister&&s.a.createElement("div",{className:"alert alert-warning mt-3 col-11 col-sm-11 col-md-6 col-lg-6",role:"alert"},"Some thing wrong, try again!"),s.a.createElement("div",{className:"card mt-3 mt-sm-3 mt-md-3 mt-lg-5"},s.a.createElement("div",{className:"card-header text-center"},s.a.createElement("h3",null,"Sign Up")),s.a.createElement("div",{className:"card-body"},s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{onChange:this.onChange,value:this.state.name,type:"text",name:"name",placeholder:"Name",className:"form-control"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{onChange:this.onChange,value:this.state.last_name,type:"text",name:"last_name",placeholder:"Last name",className:"form-control"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{onChange:this.onChange,value:this.state.email,type:"email",name:"email",placeholder:"Email",className:"form-control"})),this.state.emailRegistered&&s.a.createElement("div",{className:"form-group"},s.a.createElement("p",{className:"text-danger"},"The email was registered")),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{onChange:this.onChange,value:this.state.password,type:"password",name:"password",placeholder:"Password",className:"form-control"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{onChange:this.onChange,value:this.state.confirm_password,type:"password",name:"confirm_password",placeholder:"Confirm Password",className:"form-control"})),this.state.samePassword&&s.a.createElement("div",{className:"form-group"},s.a.createElement("p",{className:"text-danger"},"The password no match")),this.state.fieldRequired&&s.a.createElement("div",{className:"form-group"},s.a.createElement("p",{className:"text-danger"},"All field are required")),this.state.loading?s.a.createElement("button",{className:"disable form-control btn btn-dark"},"Sending..."):s.a.createElement("button",{type:"submit",className:"form-control btn btn-dark"},"Sign Up"))),s.a.createElement("div",{className:"card-footer text-center"},s.a.createElement(o.b,{className:"link",to:"/login"},"Login")))))))}}]),t}(n.Component),j=a(39),C=a.n(j),I=function(e){function t(e){var a;Object(p.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).inputCLick=function(){a.fileInput.current.click()},a.onChangeFile=function(e){if(a.setState({file:null}),e.target.value){var t=e.target.files[0].name.split(".");if("jpg"===t[1]||"jpeg"===t[1]||"png"===t[1]){a.setState({file:e.target.files[0]});var n=new FileReader;n.onload=function(e){a.setState({fileSeledted:n.result})},n.readAsDataURL(e.target.files[0]),a.setState({invalidExtName:!1})}else a.setState({invalidExtName:!0})}},a.getPosts=Object(u.a)(d.a.mark(function e(){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("token"),e.next=3,w.a.get("https://appexpressjwt.herokuapp.com/api/posts",{headers:{"x-access-token":t}}).then(function(){var e=Object(u.a)(d.a.mark(function e(t){var n;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.data;case 2:n=e.sent,a.setState({posts:n}),a.setState({loading:!1});case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){console.log(e.request),403!==e.resquest.status&&500!==e.request.status||(localStorage.removeItem("token"),this.setState({loggedIn:!1}))});case 3:case"end":return e.stop()}},e)})),a.onSubmit=function(){var e=Object(u.a)(d.a.mark(function e(t){var n,s;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a.setState({loadinPicture:!0}),null!==a.state.file){e.next=7;break}a.setState({noImage:!0}),a.setState({loadinPicture:!1}),e.next=12;break;case 7:return n=localStorage.getItem("token"),(s=new FormData).append("image",a.state.file),e.next=12,w.a.post("https://appexpressjwt.herokuapp.com/api/post",s,{headers:{"x-access-token":n,"content-type":"multipart/form-data"}}).then(function(e){a.setState({postSuccesfully:!0}),a.componentDidMount(),a.buttonPost.current.click(),a.setState({loadinPicture:!1})}).catch(function(e){console.log(e.request),403!==e.resquest.status&&500!==e.request.status||(localStorage.removeItem("token"),a.setState({loggedIn:!1}))});case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.renderRedirect=function(){if(!a.state.loggedIn)return s.a.createElement(c.a,{to:"/login"})},a.closeMessage=function(){a.setState({postSuccesfully:!1})},a.fileInput=s.a.createRef(),a.buttonPost=s.a.createRef(),a.form=s.a.createRef();var n=!0;return null===localStorage.getItem("token")&&(n=!1),a.state={loggedIn:n,posts:[],loading:!0,file:null,fileSeledted:""|ArrayBuffer,noImage:!1,invalidExtName:!1,postSuccesfully:!1,loadinPicture:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.state.loggedIn&&this.getPosts()}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(x,null),this.renderRedirect(),s.a.createElement("div",{className:"container"},this.state.postSuccesfully&&s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{onClick:this.closeMessage,className:"alert alert-success alert-dismissible fade show mt-3 col-12 col-sm-12 col-md-8",role:"alert"},s.a.createElement("strong",null,"The post picture")," was succesfully!.",s.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true"},"\xd7")))),s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:"col-12 col-sm-12 col-md-9 col-lg-8"},s.a.createElement("p",{className:"mt-3"},s.a.createElement("a",{ref:this.buttonPost,className:"btn btn-primary bg-dark","data-toggle":"collapse",href:"#collapseExample",role:"button","aria-expanded":"false","aria-controls":"collapseExample"},"Add posts")),s.a.createElement("div",{className:"collapse",id:"collapseExample"},s.a.createElement("div",{className:"card card-body"},s.a.createElement("form",{onSubmit:this.onSubmit,ref:this.form},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{name:"file",type:"file",className:"d-none",ref:this.fileInput,onChange:this.onChangeFile}),s.a.createElement("img",{onClick:this.inputCLick,src:this.state.fileSeledted||C.a,className:"img-fluid",alt:""})),this.state.invalidExtName&&s.a.createElement("div",{className:"form-group"},s.a.createElement("p",{className:"text-danger"},"Valid ext: jpg, jpeg and png")),this.noImage&&s.a.createElement("div",{className:"form-group"},s.a.createElement("p",{className:"text-danger"},"The picture is required")),s.a.createElement("div",{className:"form-group"},this.state.loadinPicture?s.a.createElement("button",{type:"submit",className:"disable form-control btn btn-dark "},"Sending..."):s.a.createElement("button",{type:"submit",className:"form-control btn btn-dark"},"Add picture"))))))),this.state.loading?s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:"mt-4"},s.a.createElement("div",{className:"spinner-border text-dark",role:"status"},s.a.createElement("span",{className:"sr-only text-center"},"Loading...")))):s.a.createElement("div",{className:"row justify-content-center"},0!==this.state.posts.length?this.state.posts.map(function(e){return s.a.createElement("div",{key:e._id,className:"col-12 col-sm-12 col-md-9 col-lg-8"},s.a.createElement("div",{className:"card mt-3"},s.a.createElement("div",{key:e.id,className:"card-header"},e.user.name," ",e.user.last_name),s.a.createElement("img",{src:"http://localhost:4000/uploads"+e.imageUrl,className:"card-img-top img-fluid ",alt:"..."})))}):s.a.createElement("div",{className:"col-12 col-sm-12 col-md-9 col-lg-8"},s.a.createElement("h1",{className:"text center"},"No pictures yet, try doing a new posts")))))}}]),t}(n.Component),O=function(e){function t(e){var a;return Object(p.a)(this,t),(a=Object(f.a)(this,Object(h.a)(t).call(this,e))).onSubmit=function(e){e.preventDefault(),a.setState({loading:!0});var t={email:a.state.email,password:a.state.password};""===a.state.email||""===a.state.password?(a.setState({fieldRequired:!0}),a.setState({loading:!1})):w.a.post("https://appexpressjwt.herokuapp.com/api/login",k.a.stringify(t),{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(){var e=Object(u.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.setState({email:"",password:""});case 2:return e.next=4,localStorage.setItem("token",t.data.token);case 4:return e.next=6,a.setState({LoggedIn:!0});case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){404===e.request.status?(a.setState({emailOrPaswordIncorrect:!0}),a.setState({loading:!1})):(a.setState({wrongRegister:!0}),a.setState({loading:!1}))})},a.onChange=function(e){a.setState(Object(i.a)({},e.target.name,e.target.value))},a.state={email:"",password:"",loading:!1,fieldRequired:!1,emailOrPaswordIncorrect:!1,wrongRegister:!1,LoggedIn:!1},a}return Object(E.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return this.state.LoggedIn?s.a.createElement(c.a,{to:"/posts"}):s.a.createElement(s.a.Fragment,null,s.a.createElement(x,null),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row justify-content-center"},s.a.createElement("div",{className:"col-12 col-sm-12 col-md-7 mt-5"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-header"},"Login"),s.a.createElement("div",{className:"card-body"},s.a.createElement("form",{onSubmit:this.onSubmit},s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{onChange:this.onChange,value:this.state.email,type:"email",name:"email",placeholder:"Email",className:"form-control"})),s.a.createElement("div",{className:"form-group"},s.a.createElement("input",{onChange:this.onChange,value:this.state.password,type:"password",name:"password",placeholder:"Password",className:"form-control"})),this.state.fieldRequired&&s.a.createElement("div",{className:"for-group"},s.a.createElement("p",{className:"text-danger"},"Email y password are required")),this.state.emailOrPaswordIncorrect&&s.a.createElement("div",{className:"for-group"},s.a.createElement("p",{className:"text-danger"},"Email or password incorrect")),this.state.loading?s.a.createElement("button",{className:"disable form-control btn btn-dark"},"Sending..."):s.a.createElement("button",{type:"submit",className:"form-control btn btn-dark"},"Login"))),s.a.createElement("div",{className:"card-footer text-center"},s.a.createElement(o.b,{className:"link",to:"/"},"Sign Up")))))))}}]),t}(n.Component);var R=function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,null,s.a.createElement(c.b,{exact:!0,path:"/react-magram-picture/",component:y}),s.a.createElement(c.b,{path:"/posts",component:I}),s.a.createElement(c.b,{path:"/login",component:O})))};l.a.render(s.a.createElement(R,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.80199087.chunk.js.map